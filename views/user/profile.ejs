<% include ../core %>

<body>
  <% include ../navigation %>
  <link rel='stylesheet' media="(min-width:581px)" href="/css/timeline-large.css" />
  <link rel='stylesheet' media="(max-width:580px)" href="/css/timeline-small.css" />
  <!--<div class="tabs is-centered is-boxed is-medium">
    <ul>
      <li class="is-active">
        <a>
          <span class="icon is-small"><i class="fas fa-user-circle " aria-hidden="true"></i></span>
          <span>개요</span>
        </a>
      </li>
      <li>
        <a href="/setting">
          <span class="icon is-small"><i class="fas fa-sliders-h " aria-hidden="true"></i></span>
          <span>설정</span>
        </a>
      </li>
    </ul>
  </div>-->
  <div class="profile container">
    <div class="profile-left">
      <div class="profile-image-container"></div>
    </div>
    <div class="profile-right">
      <div class="profile-name"><%= name %></div> <br />
      <div class="profile-info">
        게시물 <span id="posts-length" style="margin:0em 1em 0em 1em">1</span>
        친구 <span id="followers-length" style="margin:0em 1em 0em 1em">2</span>
        <!-- created by js <button onclick="location.href='/setting'" class="button" style="background-color:ghostwhite">프로필 설정</button>
            <button onclick="location.href='/subscribe'" class="button" style="background-color:ghostwhite">친구 찾기</button>-->
      </div> <br />
      <div class="profile-intro"></div>
    </div>
  </div>
  <hr />
  <div class="timeline-posts"></div>
  <form id="form_uid" method="post">
    <input type="hidden" name="uid" value="<%= uid %>" />
  </form>
  <script src="/js/lib/timeline.js"></script>
  <script>
    var profileImg = document.getElementsByClassName("profile-image-container")[0];
    var image = new Image();
    image.src = "images/default-writerImage.png";
    image.className = "profile-image";
    profileImg.appendChild(image);

    var isfollow = "<%= isfollow %>"
    if (isfollow == "me") { //create setting and subscribe button
      var buttonBox = document.getElementsByClassName("profile-info")[0];
      var settingButton = document.createElement("button");
      settingButton.className = "button";
      settingButton.style.backgroundColor = "ghostwhite";
      settingButton.style.marginRight = "5px"
      settingButton.innerText = "Setting"
      settingButton.onclick = function () {
        location.href = "/setting"
      }
      buttonBox.appendChild(settingButton);
      var subscribeButton = document.createElement("button");
      subscribeButton.className = "button";
      subscribeButton.style.backgroundColor = "ghostwhite";
      subscribeButton.innerText = "Search friend"
      subscribeButton.onclick = function () {
        location.href = "/subscribe"
      }
      buttonBox.appendChild(subscribeButton);

    }
    else { // create follow button
      var buttonBox = document.getElementsByClassName("profile-info")[0];
      var followButton = document.createElement("button");
      buttonBox.appendChild(followButton);
      followButton.className = "button";
      followButton.onclick = function () {
        var form = document.getElementById("form_uid");
        form.action = "/tryfollow";
        form.submit();
        if (isfollow == "true")
          isfollow = "false";
        else
          isfollow = "true";
      }
      if (isfollow == "true") {
        followButton.innerText = "followed";
      }
      else {
        followButton.innerText = "follow";
      }
    }
    





  </script>
  <style>
    .profile-image {
      border-radius: 50%;
      margin-left: 50%;
      width: 170px;
      padding-top: 10px;
    }
    .timeline-posts{
      margin-left: 25%;
    }

    @media (max-width:800px) {
      .profile-image {
        margin-left: unset;
      }
      .timeline-posts {
        margin-left: unset;
      }
    }

  </style>
</body>

</html>
